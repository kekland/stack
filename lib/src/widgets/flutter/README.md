Widgets here are copied from Flutter SDK with some modifications.